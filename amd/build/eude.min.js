define(["jquery","jqueryui"],function(a){return{message:function(){a("#menucategoryname").change(function(){a("#menucategoryname option:selected").each(function(){var b=a("#menucategoryname").val();a("#menucoursename").empty(),a("#menucoursename").append("<option value=''>-- Módulo --</option>"),a("#menudestinatarioname").empty(),a("#menudestinatarioname").append("<option value=''>-- Destinatario --</option>"),a.ajax({data:"catId :"+b,url:"eudemessagesrequest.php?messagecat="+b,type:"get",success:function(b,c,d){try{a("#menucoursename").append(b)}catch(a){window.console.log(a.message),window.console.log(c),window.console.log(d)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})})}),a("#menucoursename").change(function(){a("#menucoursename option:selected").each(function(){var b=a("#menucoursename").val();a("#menudestinatarioname").empty(),a("#menudestinatarioname").append("<option value=''>-- Destinatario --</option>"),a.ajax({data:"catId :"+b,url:"eudemessagesrequest.php?messagecourse="+b,type:"get",success:function(b,c,d){try{a("#menudestinatarioname").append(b)}catch(a){window.console.log(a.message),window.console.log(c),window.console.log(d)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})})})},matriculation:function(){var b={closeText:"Cerrar",prevText:"<Ant",nextText:"Sig>",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.datepicker.regional.es=b,a.datepicker.setDefaults(a.datepicker.regional.es),a("#menucategoryname").change(function(){a("#menucategoryname option:selected").each(function(){var b=a("#menucategoryname").val();a("#contenido-fecha-matriculas").empty(),a.ajax({data:"catId :"+b,url:"eudeintensivemoduledatesrequest.php?category="+b,type:"get",success:function(b,c,d){try{a("#contenido-fecha-matriculas").append(b),a(".date1").first().change(function(){if(window.confirm("¿Calcular las fechas siguientes automáticamente?")){var b=new Date(a(this).datepicker("getDate")),c=new Date(b.getFullYear(),b.getMonth(),b.getDate()+7),d=new Date(c.getFullYear(),c.getMonth(),c.getDate()+7),e=new Date(d.getFullYear(),d.getMonth(),d.getDate()+7),f=2;a(".date1").not(":first").each(function(){switch(f){case 1:a(this).datepicker("setDate",b),f++;break;case 2:a(this).datepicker("setDate",c),f++;break;case 3:a(this).datepicker("setDate",d),f++;break;case 4:a(this).datepicker("setDate",e),f=1}})}}),a(".date2").first().change(function(){if(window.confirm("¿Calcular las fechas siguientes automáticamente?")){var b=new Date(a(this).datepicker("getDate")),c=new Date(b.getFullYear(),b.getMonth(),b.getDate()+7),d=new Date(c.getFullYear(),c.getMonth(),c.getDate()+7),e=new Date(d.getFullYear(),d.getMonth(),d.getDate()+7),f=2;a(".date2").not(":first").each(function(){switch(f){case 1:a(this).datepicker("setDate",b),f++;break;case 2:a(this).datepicker("setDate",c),f++;break;case 3:a(this).datepicker("setDate",d),f++;break;case 4:a(this).datepicker("setDate",e),f=1}})}}),a(".date3").first().change(function(){if(window.confirm("¿Calcular las fechas siguientes automáticamente?")){var b=new Date(a(this).datepicker("getDate")),c=new Date(b.getFullYear(),b.getMonth(),b.getDate()+7),d=new Date(c.getFullYear(),c.getMonth(),c.getDate()+7),e=new Date(d.getFullYear(),d.getMonth(),d.getDate()+7),f=2;a(".date3").not(":first").each(function(){switch(f){case 1:a(this).datepicker("setDate",b),f++;break;case 2:a(this).datepicker("setDate",c),f++;break;case 3:a(this).datepicker("setDate",d),f++;break;case 4:a(this).datepicker("setDate",e),f=1}})}}),a(".date4").first().change(function(){if(window.confirm("¿Calcular las fechas siguientes automáticamente?")){var b=new Date(a(this).datepicker("getDate")),c=new Date(b.getFullYear(),b.getMonth(),b.getDate()+7),d=new Date(c.getFullYear(),c.getMonth(),c.getDate()+7),e=new Date(d.getFullYear(),d.getMonth(),d.getDate()+7),f=2;a(".date4").not(":first").each(function(){switch(f){case 1:a(this).datepicker("setDate",b),f++;break;case 2:a(this).datepicker("setDate",c),f++;break;case 3:a(this).datepicker("setDate",d),f++;break;case 4:a(this).datepicker("setDate",e),f=1}})}}),a(".inputdate").datepicker({dateFormat:"dd/mm/yy"}).val(),a(".inputdate").each(function(){var b=new Date(a(this).datepicker("getDate")),c=new Date(a(this).datepicker("option","minDate"));b.getFullYear()==c.getFullYear()&&b.getMonth()==c.getMonth()&&b.getDate()==c.getDate()&&a(this).datepicker("setDate",null)}),a("#resetfechas").click(function(b){b.preventDefault(),a(".inputdate").each(function(){a(this).datepicker("setDate",null)})}),a("#savedates").click(function(b){var c=!1;if(a(".inputdate").each(function(){a(this).val()||(c=!0);var b=a(this).val(),d=b.replace(new RegExp("/","g"),"-");a(this).val(d)}),c){b.preventDefault();window.alert("Hay campos incorrectos. Rellene correctamente todos los campos")}})}catch(a){window.console.log(a.message),window.console.log(c),window.console.log(d)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})})})},academic:function(){a("#menucoursename").hide(),a("#menustudentname").hide(),a("#usergrades").hide(),a("#menucategoryname").change(function(){a("#menucategoryname option:selected").each(function(){var b=a("#menucategoryname").val();a("#menucoursename").empty(),a("#menucoursename").append("<option value=''>-- Módulo --</option>"),a(this).val()?a("#menucoursename").show():a("#menucoursename").hide(),a("#menustudentname").empty(),a("#menustudentname").append("<option value=''>-- Alumno --</option>"),a("#menustudentname").hide(),a("#usergrades").hide(),a.ajax({data:"catId :"+b,url:"eudegradesearchrequest.php?cat="+b,type:"get",success:function(b,c,d){try{a("#menucoursename").append(b)}catch(a){window.console.log(a.message),window.console.log(c),window.console.log(d)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})})}),a("#menucoursename").change(function(){a("#menustudentname").show(),a("#usergrades").hide(),a("#menucoursename option:selected").each(function(){var b=a("#menucoursename").val();a("#menustudentname").empty(),a("#menustudentname").append("<option value=''>-- Alumno --</option>"),a(this).val()?a("#menustudentname").show():a("#menustudentname").hide(),a.ajax({data:"courseId :"+b,url:"eudegradesearchrequest.php?course="+b,type:"get",success:function(b,c,d){try{a("#menustudentname").append(b)}catch(a){window.console.log(a.message),window.console.log(c),window.console.log(d)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})})}),a("#menustudentname").change(function(){a("#usergrades").show(),a(this).val()||a("#usergrades").hide(),a("#menustudentname option:selected").each(function(){var b=a("#menustudentname").val(),c="../../grade/report/user/index.php?userid="+b+"&id="+a("#menucoursename").val();a("#usergrades").attr("href",c)})})},calendar:function(){a("#modalwindowforprint").empty(),a("#openmodalwindowforprint").click(function(){a("#modalwindowforprint").empty(),a.ajax({url:"eudecalendarmodalwindow.php",type:"get",success:function(b,c,d){try{a("#modalwindowforprint").append(b),a("#closemodalwindowbutton").click(function(){a("#modalwindowforprint").empty()});var e={closeText:"Cerrar",prevText:"<Ant",nextText:"Sig>",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.datepicker.regional.es=e,a.datepicker.setDefaults(a.datepicker.regional.es),a(".inputdate").datepicker({dateFormat:"dd/mm/yy"}).val()}catch(a){window.console.log(a.message),window.console.log(c),window.console.log(d)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})}),a(".cb-eventkey").each(function(){a(this).click(function(){var b=a(this).prop("name");a(this).prop("checked")?a("div."+b).each(function(){a(this).removeClass("disabled"+b)}):a("div."+b).each(function(){a(this).addClass("disabled"+b)})})}),a("div.hasevent").each(function(){var b=a(this).attr("class");b.includes("eudeevent")&&a(this).parent().find("div[name='eudeglobalevent']").append(a(this)),b.includes("intensivemodulebegin")&&a(this).parent().find("div[name='intensivecourse']").append(a(this)),b.includes("testdate")&&a(this).parent().find("div[name='testsubmission']").append(a(this)),b.includes("questionnairedate")&&a(this).parent().find("div[name='questionnairedate']").append(a(this)),b.includes("activityend")&&a(this).parent().find("div[name='activitysubmission']").append(a(this)),b.includes("modulebegin")&&a(this).parent().find("div[name='normalcourse']").append(a(this))})},eventlist:function(){a("#printeventbutton").click(function(){a(".datepickerwrapper").hide(),a("#generateeventlist").hide(),a("#printeventbutton").hide(),a("#page-footer").hide(),a("#moodle-footer").hide(),a("#mr-nav").hide(),window.print(),a(".contentwrapper").show(),a("#printeventbutton").show(),a("#page-footer").show(),a("#moodle-footer").show(),a("#mr-nav").show()});var b={closeText:"Cerrar",prevText:"<Ant",nextText:"Sig>",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};a.datepicker.regional.es=b,a.datepicker.setDefaults(a.datepicker.regional.es),a(".inputdate").datepicker({dateFormat:"dd/mm/yy"}).val(),a("#generateeventlist").click(function(b){var c=!1;if(a(".inputdate").each(function(){a(this).val()||(c=!0)}),c){b.preventDefault();window.alert("Hay campos incorrectos. Rellene correctamente todos los campos")}})},profile:function(){function b(){a(".abrir").click(function(){var b,c=a(this).attr("id");b=12==c.length?c[6]:c.substring(c.length-5,6);var d=c[c.length-4],e=c[c.length-2];a("#ventana-flotante").css("display","block"),a.ajax({data:"idcourse="+b,url:"eudemodaladvise.php",type:"post",success:function(c,f,g){try{a("#ventana-flotante").html(c),a("button.cerrar").click(function(){a("#ventana-flotante").css("display","none")}),a("#course").attr("value",b),a("input.btn").attr("id","abrirFechas("+b+","+d+","+e+")"),a("input.btn").click(function(){var b,c=a("input.btn").attr("id");b=12==c.length?c[12]:c.substring(c.length-5,12),a("#ventana-flotante").css("display","block"),a.ajax({data:"idcourse="+b,url:"eudemodaldates.php",type:"post",success:function(c){a("#ventana-flotante").html(c),a("button.cerrar").click(function(){a("#ventana-flotante").css("display","none")}),a("#course").attr("value",b)}})})}catch(a){window.console.log(a.message),window.console.log(f),window.console.log(g)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})}),a(".abrirFechas").click(function(){var b,c=a(this).attr("id");b=18==c.length?c[12]:c.substring(c.length-5,12);var d=c[c.length-4];a("#ventana-flotante").css("display","block"),a.ajax({data:"idcourse="+b,url:"eudemodaldates.php",type:"post",success:function(c,e,f){try{a("#ventana-flotante").html(c),a("button.cerrar").click(function(){a("#ventana-flotante").css("display","none")}),a("#course").attr("value",b);for(var g=a("input#course").val(),h=a(".mod"+g+" .c1 span").text(),i=a("select#menudate").children().length,j=1;j<=i;j++){h==a("select#menudate option:nth-child("+j+")").text()&&a("select#menudate option:nth-child("+j+")").attr("selected","selected")}1==d?a("#amount").attr("value","0"):2==d&&a("#fechas").attr("action","eudeprofile.php")}catch(a){window.console.log(a.message),window.console.log(e),window.console.log(f)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})})}b(),a("#menucategoryname").change(function(){var c=a("#menucategoryname").val(),d=a("#menucategoryname").children().last().val();if(0!==c)for(var e=0;e<=d;e++)e!=c?a(".cat"+e).css("display","none"):a(".cat"+e).css("display","table-row");else for(var f=0;f<d;f++)a(".cat"+f).css("display","table-row");var g=a("#menucategoryname").val();a.ajax({data:"catId="+g,url:"eudeprofilerequest.php?profilecat="+g,type:"post",success:function(c,d,e){try{window.console.log(c),a("#student").empty(),a("#student").append(c.student),a("#tablecontainer").empty(),a("#tablecontainer").append(c.table),b()}catch(a){window.console.log(a.message),window.console.log(d),window.console.log(e)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})}),a("#student").change(function(){a("#student option:selected").each(function(){var c=a("#menucategoryname").val(),d=a(this).val();a.ajax({data:"catId="+c,url:"eudeprofilerequest.php?profilecat="+c+"&profilestudent="+d,type:"post",success:function(c,d,e){try{a("#tablecontainer").empty(),a("#tablecontainer").append(c),b()}catch(a){window.console.log(a.message),window.console.log(d),window.console.log(e)}},error:function(a,b,c){window.console.log(a.responseText),window.console.log(b),window.console.log(c)}})})})},redirect:function(){a(".linkselect").change(function(){var b=a(this).attr("course"),c=a(this).attr("notice");switch(a(this).val()){case"1":window.location.href="../../mod/forum/view.php?f="+c;break;case"2":window.location.href="../../mod/forum/index.php?id="+b;break;case"3":window.location.href="../../mod/assign/index.php?id="+b}})},menu:function(){a(document).ready(function(){var b=window.location.href,c=b.split("?"),d=window.location.pathname;"/local/eudecustom/eudeprofile.php"!=d&&"/local/eudecustom/eudegradesearch.php"!=d||a(".menulateral .icon-menu a:nth-child(2) li").addClass("selected"),"/local/eudecustom/eudeteachercontrolpanel.php"!=d&&"/grade/report/overview/index.php"!=d||a(".menulateral .icon-menu a:nth-child(3) li").addClass("selected");for(var e=2;e<8;e++){var f=a(".menulateral .icon-menu a:nth-child("+e+")").attr("href"),g=f.split("?");c[0]==g[0]&&a(".menulateral .icon-menu a:nth-child("+e+") li").addClass("selected")}})},payment:function(){a(document).ready(function(){a("body").css("display","none"),a("#id_submitbutton").click()})}}});